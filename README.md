Telegram Bot –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∫–∞–º–µ—Ä—ã
–ü—Ä–æ—Å—Ç–æ–π Telegram –±–æ—Ç –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã —Å–µ—Ä–≤–µ—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è—Ä–∫–æ—Å—Ç–∏. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ Telegram.

üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
bash
git clone <–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π>
cd my_TG_bots/CamBot
2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bash
sudo apt update
sudo apt install fswebcam python3 python3-pip python3-venv
3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
bash
cd /home/mike7442/my_TG_bots
python3 -m venv venv
source venv/bin/activate
pip install pyTelegramBotAPI
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather –≤ Telegram

–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ main.py:

python
BOT_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
BRIGHTNESS = -15  # –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —è—Ä–∫–æ—Å—Ç—å –ø–æ–¥ –≤–∞—à–∏ —É—Å–ª–æ–≤–∏—è
5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
bash
python3 main.py
üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
my_TG_bots/
‚îú‚îÄ‚îÄ CamBot/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ CamBot.service.txt   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è systemd —Å–ª—É–∂–±—ã
‚îú‚îÄ‚îÄ commands.html            # –ü–æ–º–æ—â–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
‚îî‚îÄ‚îÄ venv/                    # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python
üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (systemd —Å–ª—É–∂–±–∞)
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–ª—É–∂–±—ã:
bash
sudo cp CamBot.service.txt /etc/systemd/system/CamBot.service
sudo systemctl daemon-reload
sudo systemctl enable CamBot.service
sudo systemctl start CamBot.service
–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å-—Ñ–∞–π–ª (CamBot.service.txt):
ini
[Unit]
Description=Telegram Bot Service  # –û–ø–∏—Å–∞–Ω–∏–µ —Å–ª—É–∂–±—ã
After=network.target              # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–µ—Ç–∏

[Service]
Type=simple                       # –¢–∏–ø —Å–ª—É–∂–±—ã - –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å
User=mike7442                     # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å
Group=mike7442                    # –ì—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
WorkingDirectory=/home/mike7442/my_TG_bots/CamBot  # –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
ExecStart=/bin/bash -c "source /home/mike7442/my_TG_bots/venv/bin/activate && exec python /home/mike7442/my_TG_bots/CamBot/main.py"  # –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
Restart=always                    # –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ —Å–±–æ—è—Ö
RestartSec=5                      # –ü–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º (5 —Å–µ–∫)
Environment=PYTHONUNBUFFERED=1    # –ù–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ Python

[Install]
WantedBy=multi-user.target        # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–±–æ–π
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ commands.html –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ –∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

–î–µ–π—Å—Ç–≤–∏–µ	–ö–æ–º–∞–Ω–¥–∞
–ó–∞–ø—É—Å–∫	sudo systemctl start CamBot
–û—Å—Ç–∞–Ω–æ–≤–∫–∞	sudo systemctl stop CamBot
–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫	sudo systemctl restart CamBot
–°—Ç–∞—Ç—É—Å	sudo systemctl status CamBot
–õ–æ–≥–∏	sudo journalctl -u CamBot -f
–ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞	sudo systemctl enable CamBot
üí° –ü–æ–º–æ—â–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ commands.html
–Ø —Å–æ–∑–¥–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É commands.html –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º. –û–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º - –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –∫–ª–∏–∫–∞–π—Ç–µ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞.

–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

–û—Ç–∫—Ä–æ–π—Ç–µ commands.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—É—é –∫–æ–º–∞–Ω–¥—É - –æ–Ω–∞ —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å–µ—Ä–≤–µ—Ä–∞ (Ctrl+V –∏–ª–∏ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π)

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —è—Ä–∫–æ—Å—Ç–∏
–í —Ñ–∞–π–ª–µ main.py –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä —è—Ä–∫–æ—Å—Ç–∏ –ø–æ–¥ —Å–≤–æ–∏ —É—Å–ª–æ–≤–∏—è:

python
BRIGHTNESS = -15  # –ó–Ω–∞—á–µ–Ω–∏—è –æ—Ç -100 –¥–æ 100
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

-20 - –¥–ª—è –æ—á–µ–Ω—å —è—Ä–∫–∏—Ö —É—Å–ª–æ–≤–∏–π (—É–ª–∏—Ü–∞)

0 - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

+20 - –¥–ª—è —Ç–µ–º–Ω—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π

üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ main.py

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞: ls /dev/video*

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ

–ï—Å–ª–∏ —Å–ª—É–∂–±–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
bash
sudo systemctl status CamBot
sudo journalctl -u CamBot -n 50
–ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:
bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cd /home/mike7442/my_TG_bots
rm -rf venv
python3 -m venv venv
source venv/bin/activate
pip install pyTelegramBotAPI
üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: sudo journalctl -u CamBot -f

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–∞–º–µ—Ä—ã

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º!
